## Part 1. Установка ОС

![Вывод команды cat /etc/issue](/images/part1.jpg)

**Изображение 1. Вывод команды cat /etc/issue**

## Part 2. Создание пользователя

1. Создадим пользователя jewishka_test и добавим его в группу adm
   ![Создание пользователя и добавление в adm](/images/part2_1.jpg)

**Изображение 2. Создание пользователя и добавление в adm**

2. Введем команду cat /etc/passwd

![Вывод команды cat /etc/passwd](/images/part2_2.jpg)

**Изображение 3. Вывод команды cat /etc/passwd**

В последней строчке мы можем увидеть недавно созданного пользователя.

## Part 3. Настройка сети ОС

1. Изменяем имя машины с помощью nano

![](/images/part3_1.jpg)

**Изображение 4. Имя машины до изменения**

![](/images/part3_2.jpg)

**Изображение 5. Имя машины после изменения**

2. Изменяем временную зону

![](/images/part3_3.jpg)

**Изображение 6. Изменение временной зоны**

3. Выведем названия сетевых интерфейсов

![](/images/part3_4.jpg)

**Изображение 7. Названия сетевых интерфейсов**

Интерфейс lo — это локальный интерфейс. Он представляет собой виртуальный сетевой интерфейс, который используется для связи внутри самой машины, то есть для обмена данными между приложениями и процессами, которые запущены на одном компьютере.

4. Получаем ip-адрес с помощью команды dhclient -v enp0s3

![](/images/part3_5.jpg)

**Изображение 8. Получение ip-адреса с помощью команды dhclient -v enp0s3**

Теперь просмотрим полученный адрес с помощью ifconfig

![](/images/part3_6.jpg)

**Изображение 9. ip-адрес для enp0s3**

DHCP расшифровывается как Dynamic Host Configuration Protocol (Протокол динамической настройки узлов). Это сетевой протокол, который используется для автоматической настройки IP-адресов и других сетевых параметров на устройствах в сети.

5. Узнаем адреса шлюзов

Получаем внешний ip-адрес шлюза с помощью команды curl и сайта ifconfig.me

![](/images/part3_7.jpg)

**Изображение 10. Внешний ip-адрес шлюза**

Получаем внутрений IP-адрес шлюза

![](/images/part3_8.jpg)

**Изображение 11. Внутрений IP-адрес шлюза**

6. Изменяем файл etc/netplan/00-installer-congif.yaml с помощью nano

![](/images/part3_9.jpg)

**Изображение 12. Измененный файл etc/netplan/00-installer-congif.yaml**

Теперь вводим команду sudo netplan apply для применения конфигурации и команду sudo netplan try для применения изменений.
Проверим изменения с помощью ifconfig

![](/images/part3_10.jpg)

**Изображение 13. Был установлен статический ip-адрес**

7. Перезагрузим виртуальную машину и пропингуем ya.ru и 1.1.1.1

![](/images/part3_11.jpg)

**Изображение 14. Пинг ya.ru**

![](/images/part3_12.jpg)

**Изображение 15. Пинг 1.1.1.1**

## Part 4. Обновление ОС

Обновим системные пакеты с помощью команды sudo apt upgrade

![](/images/part4_1.jpg)

**Изображение 16. Проверка на наличие доступных обновлений**

## Part 5. Использование команды sudo

1. Для того чтобы разрешить jewishka_test выполнять команду sudo используем следующую команду

![](/images/part5_1.jpg)

**Изображение 17. Добавление jewishka_test в группу sudo**

2. Проверим что у пользователя есть права

![](/images/part5_2.jpg)

**Изображение 18. Проверка на наличие прав у пользователя**
Команда sudo (сокращение от "superuser do") используется для выполнения команд с правами суперпользователя.
Она позволяет временно получить привилегии администратора, не выходя из своей учетной записи.

3. Изменим hostname на user-2

![](/images/part5_4.jpg)

**Изображение 19. Команда для изменения hostname**

![](/images/part5_5.jpg)

**Изображение 20. Измененный hostname**

## Part 6. Установка и настройка службы времени

1. Выведем время с помощью timedatectl

![](/images/part6_1.jpg)

**Изображение 21. timedatectl до манипуляций**

2. Включим синхронизацию времени с помощью ntp

![](/images/part6_2.jpg)

**Изображение 22. Включение ntp**

3. Проверка синхронизации

![](/images/part6_3.jpg)

**Изображение 23. Вывод команды timedatectl show**

## Part 7. Установка и использование текстовых редакторов

1. Создадим и отредактируем файлы в редакторах Vim, Nano, JOE

![](/images/part7_1.jpg)

**Изображение 24. Файл test_vim.txt**

Для внесения изменений понадобилось войти в режим INSERT (клавиша i), для сохранения изменений и выхода нужно было нажать Esc и вписать :wq, а после Enter.

![](/images/part7_2.jpg)

**Изображение 25. Файл test_nano.txt**

Для сохранений изменений и выхода нужно было нажать сочетание клавиш Ctrl+O, Ctrl+X

![](/images/part7_3.jpg)

**Изображение 26. Файл test_joe.txt**

Для сохранений изменений и выхода нужно было нажать сочетание клавиш Ctrl+K+X

2. Отредактируем созданные ранее файлы и выйдем без изменений

![](/images/part7_4.jpg)

**Изображение 27. Файл test_vim.txt**

Для выхода без сохранений изменений нужно было нажать Esc и вписать :q!, а после Enter.

![](/images/part7_5.jpg)

**Изображение 28. Файл test_nano.txt**

Для выхода без сохранений изменений нужно было нажать Ctrl+X и нажать клавишу N (No).

![](/images/part7_6.jpg)

**Изображение 29. Файл test_joe.txt**

Для выхода без сохранений изменений нужно было нажать Ctrl+C и нажать клавишу Y (Yes).

3. Поиск и замена слов

![](/images/part7_7.jpg)

**Изображение 30. Файл test_vim.txt**

Для поиска слов нужно нажать / и ввести нужное слово

![](/images/part7_8.jpg)

**Изображение 31. Файл test_vim.txt**

Для замены слов нужно ввести :s/старое слово/новое слово

![](/images/part7_9.jpg)

**Изображение 32. Файл test_nano.txt**

Для поиска слов нужно Ctrl+W и ввести нужное слово

![](/images/part7_10.jpg)

**Изображение 33. Файл test_nano.txt**

Для замены слов нужно ввести Ctrl+\, ввести слово которое нужно заменить, нажать Enter, ввести слово на замену, нажать Enter, а затем нажать Y (Yes).

![](/images/part7_11.jpg)

**Изображение 34. Файл test_joe.txt**

Для поиска слов нужно Ctrl+K+F и ввести нужно слово

![](/images/part7_12.jpg)

**Изображение 35. Файл test_joe.txt**

Для замены слов нужно Ctrl+K+F, Enter, после этого нажать клавишу R, Enter, ввести слово для замены, после этого нажать Yes

## Part 8. Установка и базовая настройка сервиса SSHD

1. Установим ssh

![](/images/part8_1.jpg)

**Изображение 36. Команда для установки ssh**

2. Добавим автостарт ssh

![](/images/part8_2.jpg)

**Изображение 37. Команда для автостарта ssh**

3. Изменим файл /etc/ssh/sshd_config для того чтобы перенастроить на порт 2022

![](/images/part8_3.jpg)

**Изображение 38. Редактирование файла sshd_config**

4. Проверим наличие процесса sshd

![](/images/part8_4.jpg)

**Изображение 39. Команда для проверки наличия процесса sshd**

ps - команда, которая выводит статистику и информацию о состоянии процессов в системе, в том числе ИД процесса или нити, объем выполняемого ввода-вывода и используемый объем ресурсов процессора и памяти.

Список ключей:

-A, -e, (a) - выбрать все процессы;

-a - выбрать все процессы, кроме фоновых;

-d, (g) - выбрать все процессы, даже фоновые, кроме процессов сессий;

-N - выбрать все процессы кроме указанных;

-С - выбирать процессы по имени команды;

-G - выбрать процессы по ID группы;

-p, (p) - выбрать процессы PID;

--ppid - выбрать процессы по PID родительского процесса;

-s - выбрать процессы по ID сессии;

-t, (t) - выбрать процессы по tty;

-u, (U) - выбрать процессы пользователя.

5. Введем команду netstat -tan

![](/images/part8_5.jpg)

**Изображение 40. Вывод команды netstat -tan**

Команда netstat -tan используется для отображения сетевых соединений и их состояния на системе. Давайте разберем, что означают ключи этой команды и какие данные выводятся.

Ключи:

-t: Показывает только TCP-соединения.

-a: Показывает все соединения и прослушиваемые порты.

-n: Отображает адреса и порты в числовом виде (то есть не пытается разрешить имена хостов и сервисов).

Proto - Протокол, используемый сокетом.

Recv-Q - Счётчик байт не скопированных программой пользователя из этого сокета.

Send-Q - Счётчик байтов, не подтверждённых удалённым узлом.

Local Address - Адрес и номер порта локального конца сокета. Если не указана опция --numeric (-n), адрес сокета преобразуется в каноническое имя узла (FQDN), и номер порта преобразуется в соответствующее имя службы.

Foreign Address - Адрес и номер порта удалённого конца сокета. Аналогично "Local Address"

State - Состояние сокета.

0.0.0.0 - это немаршрутизируемый адрес IPv4, который используется в качестве адреса по умолчанию или адреса-заполнителя.

## Part 9. Установка и использование утилит top, htop

![](/images/part9_1.jpg)

**Изображение 41. Вывод команды top**

uptime - 1:18

количество авторизованных пользователей - 2

среднюю загрузку системы - 0.10, 0.03, 0.01

общее количество процессов - 101

загрузку cpu - 0.0 us, 0.0 sy, 0.0 ni, 99.7 id, 0.0 wa, 0.0 hi, 0.3 si, 0.0 st

загрузку памяти - 1971.6 total, 1459.9 free, 152.2 used, 361.5 buff/cache

pid процесса занимающего больше всего памяти - 1

pid процесса, занимающего больше всего процессорного времени - 1739

![](/images/part9_2.jpg)

**Изображение 42. htop отсортированный по PID**

![](/images/part9_3.jpg)

**Изображение 43. htop отсортированный по PERCENT_CPU**

![](/images/part9_4.jpg)

**Изображение 44. htop отсортированный по PERCENT_MEM**

![](/images/part9_5.jpg)

**Изображение 45. htop отсортированный по TIME**

![](/images/part9_6.jpg)

**Изображение 46. htop отфильтрованный для процесса sshd**

![](/images/part9_7.jpg)

**Изображение 47. htop c процессом syslog**

![](/images/part9_8.jpg)

**Изображение 48. htop с добавленным выводом hostname, clock и uptime**

## Part 10. Использование утилиты fdisk

1. Запустим команду sudo fdisk -l

![](/images/part10_1.jpg)

**Изображение 49. Вывод команды fdisk -l**

Название диска, размер и количество секторов - Disk /dev/sda: 25 GiB, 26843545600 bytes, 52428800 sectors

![](/images/part10_2.jpg)

**Изображение 50. Вывод размера swap**

Размер swap - 2GB

## Part 11. Использование утилиты df

1. Получим информацию о дисковом пространстве

![](/images/part11_1.jpg)

**Изображение 51. Вывод команды df /**

Размер раздела - 11758760

Размер занятого пространства - 5699532

Размер свободного пространства - 5440120

Процент использования - 52%

Единица измерения - 1K-blocks (килобайт)

2. Получим информацию о дисковом пространстве в более привычном виде

![](/images/part11_2.jpg)

**Изображение 52. Вывод команды df -Th /**

Размер раздела - 12G

Размер занятого пространства - 5.5G

Размер свободного пространства - 5.2G

Процент использования - 52%

Тип файловой системы - ext4

## Part 12. Использование утилиты du

1. Запустим команду du

![](/images/part12_1.jpg)

**Изображение 53. Вывод команды du**

2. Получим информацию о размере папок /home, /var, /var/log в байтах

![](/images/part12_2.jpg)

**Изображение 54. Размер папок в байтах**

3. Получим информацию о размере папок /home, /var, /var/log в человекочитаемом виде

![](/images/part12_3.jpg)

**Изображение 55. Размер папок в человекочитаемом виде**

4. Выводим размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя \*).

![](/images/part12_4.jpg)

**Изображение 56. Размер всего содержимого в человекочитаемом виде**

## Part 13. Установка и использование утилиты ncdu

1. Установим ncdu - sudo apt install ncdu

2. Выведем размеры папок /home, /var, /var/log

![](/images/part13_1.jpg)

**Изображение 57. Размер папки /home**

![](/images/part13_2.jpg)

**Изображение 58. Размер папки /var**

![](/images/part13_3.jpg)

**Изображение 59. Размер папки /var/log**

## Part 14. Работа с системными журналами

1. Для просмотра системных журналов нужно использовать команду cat

2. Находим последнюю успешную авторизацию

![](/images/part14_1.jpg)

**Изображение 60. Команда для нахождения последней успешной авторизации**

Время - Feb 5 16:27:52

Имя пользователя - jewishka

Метод входа - ssh2

3. Рестартнем ssh

![](/images/part14_2.jpg)

**Изображение 61. Логи рестарта ssh**

## Part 15. Использование планировщика заданий CRON

1. Используя планировщик заданий запустим uptime через каждые две минуты

![](/images/part15_1.jpg)

**Изображение 62. Список текущих заданий для CRON**

![](/images/part15_2.jpg)

**Изображение 63. Логи с CRON**

2. Удалим все задания из планировщика заданий

![](/images/part15_3.jpg)

**Изображение 64. Удаление всех заданий**
